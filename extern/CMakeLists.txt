option(FAULT_BUNDLE_CPPTRACE "Bundle cpptrace into libfault" ON)

if(TARGET cpptrace::cpptrace)
    message(STATUS "libfault: Using existing cpptrace::cpptrace target")
elseif(FAULT_BUNDLE_CPPTRACE)
    message(STATUS "libfault: Bundling internal cpptrace via FetchContent")
    add_subdirectory(cpptrace EXCLUDE_FROM_ALL)
else()
    message(STATUS "libfault: Searching for system-wide cpptrace")
    find_package(cpptrace REQUIRED)
endif()